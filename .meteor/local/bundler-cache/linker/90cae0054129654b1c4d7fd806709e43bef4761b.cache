[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nReactMeteorData = Package['react-meteor-data'].ReactMeteorData;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nAccounts = Package['accounts-base'].Accounts;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"main.html\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// client/template.main.js                                                                                        //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\n                                                                                                                  // 1\nTemplate.body.addContent((function() {                                                                            // 2\n  var view = this;                                                                                                // 3\n  return HTML.Raw('<div id=\"render-target\"></div>');                                                              // 4\n}));                                                                                                              // 5\nMeteor.startup(Template.body.renderToDocument);                                                                   // 6\n                                                                                                                  // 7\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"main.jsx\":[\"react\",\"meteor/meteor\",\"react-dom\",\"../imports/startup/accounts-config.js\",\"../imports/ui/App.jsx\",function(require){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// client/main.jsx                                                                                                //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nvar _react = require('react');                                                                                    // 1\n                                                                                                                  //\nvar _react2 = _interopRequireDefault(_react);                                                                     //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 2\n                                                                                                                  //\nvar _reactDom = require('react-dom');                                                                             // 3\n                                                                                                                  //\nrequire('../imports/startup/accounts-config.js');                                                                 // 5\n                                                                                                                  //\nvar _App = require('../imports/ui/App.jsx');                                                                      // 6\n                                                                                                                  //\nvar _App2 = _interopRequireDefault(_App);                                                                         //\n                                                                                                                  //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                 //\n                                                                                                                  //\n_meteor.Meteor.startup(function () {                                                                              // 8\n  (0, _reactDom.render)(_react2['default'].createElement(_App2['default'], null), document.getElementById('render-target'));\n});                                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}]},\"imports\":{\"api\":{\"msgs.js\":[\"meteor/meteor\",\"meteor/mongo\",\"meteor/check\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/api/msgs.js                                                                                            //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\nexports.Msgs = undefined;                                                                                         //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 1\n                                                                                                                  //\nvar _mongo = require('meteor/mongo');                                                                             // 2\n                                                                                                                  //\nvar _check = require('meteor/check');                                                                             // 3\n                                                                                                                  //\nvar Msgs = exports.Msgs = new _mongo.Mongo.Collection('msgs');                                                    // 5\nif (_meteor.Meteor.isServer) {                                                                                    // 6\n  _meteor.Meteor.publish('msgs', function () {                                                                    // 7\n    function msgsPublication() {                                                                                  // 7\n      return Msgs.find({                                                                                          // 8\n        $or: [{ send_id: this.userId }, { recevier_id: this.userId }]                                             // 9\n      });                                                                                                         //\n    }                                                                                                             //\n                                                                                                                  //\n    return msgsPublication;                                                                                       //\n  }());                                                                                                           //\n}                                                                                                                 //\n_meteor.Meteor.methods({                                                                                          // 16\n  chatMsg: function () {                                                                                          // 17\n    function chatMsg(friend_id) {                                                                                 // 17\n      console.log(this.userId, friend_id, 'xx');                                                                  // 18\n      (0, _check.check)(friend_id, String);                                                                       // 19\n      return Msgs.find({                                                                                          // 20\n        $or: [{ send_id: this.userId, recevier_id: friend_id }, { recevier_id: friend_id, send_id: this.userId }]\n      }).fetch();                                                                                                 //\n    }                                                                                                             //\n                                                                                                                  //\n    return chatMsg;                                                                                               //\n  }(),                                                                                                            //\n                                                                                                                  //\n  'msgs.insert': function () {                                                                                    // 28\n    function msgsInsert(text, r_id) {                                                                             //\n      (0, _check.check)(text, String);                                                                            // 29\n                                                                                                                  //\n      if (!_meteor.Meteor.userId()) {                                                                             // 31\n        throw new _meteor.Meteor.Error('not-authorized');                                                         // 32\n      }                                                                                                           //\n                                                                                                                  //\n      Msgs.insert({                                                                                               // 35\n        send_id: _meteor.Meteor.userId(),                                                                         // 36\n        recevier_id: r_id,                                                                                        // 37\n        content: text,                                                                                            // 38\n        time: new Date(),                                                                                         // 39\n        isUnread: true                                                                                            // 40\n      });                                                                                                         //\n    }                                                                                                             //\n                                                                                                                  //\n    return msgsInsert;                                                                                            //\n  }()                                                                                                             //\n});                                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"users.js\":[\"meteor/meteor\",\"meteor/mongo\",\"meteor/check\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/api/users.js                                                                                           //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\nexports.Users = undefined;                                                                                        //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 1\n                                                                                                                  //\nvar _mongo = require('meteor/mongo');                                                                             // 2\n                                                                                                                  //\nvar _check = require('meteor/check');                                                                             // 3\n                                                                                                                  //\nvar Users = exports.Users = _meteor.Meteor.users;                                                                 // 5\nif (_meteor.Meteor.isServer) {                                                                                    // 6\n  _meteor.Meteor.publish('users', function () {                                                                   // 7\n    function usersPublication() {                                                                                 // 7\n      return Users.find({});                                                                                      // 8\n    }                                                                                                             //\n                                                                                                                  //\n    return usersPublication;                                                                                      //\n  }());                                                                                                           //\n}                                                                                                                 //\n_meteor.Meteor.methods({                                                                                          // 11\n  findUser: function () {                                                                                         // 12\n    function findUser(u_id) {                                                                                     // 12\n      return Users.findOne({                                                                                      // 13\n        _id: u_id                                                                                                 // 14\n      }, {                                                                                                        //\n        fields: {                                                                                                 // 16\n          'username': 1                                                                                           // 17\n        }                                                                                                         //\n      });                                                                                                         //\n    }                                                                                                             //\n                                                                                                                  //\n    return findUser;                                                                                              //\n  }()                                                                                                             //\n});                                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}]},\"startup\":{\"accounts-config.js\":[\"meteor/accounts-base\",function(require){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/startup/accounts-config.js                                                                             //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nvar _accountsBase = require('meteor/accounts-base');                                                              // 1\n                                                                                                                  //\n_accountsBase.Accounts.ui.config({                                                                                // 3\n  passwordSignupFields: 'USERNAME_ONLY'                                                                           // 4\n});                                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}]},\"ui\":{\"AccountsUIWrapper.jsx\":[\"babel-runtime/helpers/classCallCheck\",\"babel-runtime/helpers/possibleConstructorReturn\",\"babel-runtime/helpers/inherits\",\"react\",\"react-dom\",\"meteor/templating\",\"meteor/blaze\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/ui/AccountsUIWrapper.jsx                                                                               //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\n                                                                                                                  //\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                           //\n                                                                                                                  //\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                  //\n                                                                                                                  //\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');                     //\n                                                                                                                  //\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);                            //\n                                                                                                                  //\nvar _inherits2 = require('babel-runtime/helpers/inherits');                                                       //\n                                                                                                                  //\nvar _inherits3 = _interopRequireDefault(_inherits2);                                                              //\n                                                                                                                  //\nvar _react = require('react');                                                                                    // 1\n                                                                                                                  //\nvar _react2 = _interopRequireDefault(_react);                                                                     //\n                                                                                                                  //\nvar _reactDom = require('react-dom');                                                                             // 2\n                                                                                                                  //\nvar _reactDom2 = _interopRequireDefault(_reactDom);                                                               //\n                                                                                                                  //\nvar _templating = require('meteor/templating');                                                                   // 3\n                                                                                                                  //\nvar _blaze = require('meteor/blaze');                                                                             // 4\n                                                                                                                  //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                 //\n                                                                                                                  //\nvar AccountsUIWrapper = function (_Component) {                                                                   //\n  (0, _inherits3['default'])(AccountsUIWrapper, _Component);                                                      //\n                                                                                                                  //\n  function AccountsUIWrapper() {                                                                                  //\n    (0, _classCallCheck3['default'])(this, AccountsUIWrapper);                                                    //\n    return (0, _possibleConstructorReturn3['default'])(this, _Component.apply(this, arguments));                  //\n  }                                                                                                               //\n                                                                                                                  //\n  AccountsUIWrapper.prototype.componentDidMount = function () {                                                   //\n    function componentDidMount() {                                                                                //\n      // Use Meteor Blaze to render login buttons                                                                 //\n      this.view = _blaze.Blaze.render(_templating.Template.loginButtons, _reactDom2['default'].findDOMNode(this.refs.container));\n    }                                                                                                             //\n                                                                                                                  //\n    return componentDidMount;                                                                                     //\n  }();                                                                                                            //\n                                                                                                                  //\n  AccountsUIWrapper.prototype.componentWillUnmount = function () {                                                // 6\n    function componentWillUnmount() {                                                                             //\n      // Clean up Blaze view                                                                                      //\n      _blaze.Blaze.remove(this.view);                                                                             // 14\n    }                                                                                                             //\n                                                                                                                  //\n    return componentWillUnmount;                                                                                  //\n  }();                                                                                                            //\n                                                                                                                  //\n  AccountsUIWrapper.prototype.render = function () {                                                              // 6\n    function render() {                                                                                           //\n      // Just render a placeholder container that will be filled in                                               //\n      return _react2['default'].createElement('span', { ref: 'container' });                                      // 18\n    }                                                                                                             //\n                                                                                                                  //\n    return render;                                                                                                //\n  }();                                                                                                            //\n                                                                                                                  //\n  return AccountsUIWrapper;                                                                                       //\n}(_react.Component);                                                                                              //\n                                                                                                                  //\nexports['default'] = AccountsUIWrapper;                                                                           //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"App.jsx\":[\"babel-runtime/helpers/classCallCheck\",\"babel-runtime/helpers/possibleConstructorReturn\",\"babel-runtime/helpers/inherits\",\"react\",\"react-dom\",\"meteor/meteor\",\"meteor/react-meteor-data\",\"../api/msgs.js\",\"../api/users.js\",\"./MsgBox.jsx\",\"./ChatBox.jsx\",\"./AccountsUIWrapper.jsx\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/ui/App.jsx                                                                                             //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\n                                                                                                                  //\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                           //\n                                                                                                                  //\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                  //\n                                                                                                                  //\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');                     //\n                                                                                                                  //\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);                            //\n                                                                                                                  //\nvar _inherits2 = require('babel-runtime/helpers/inherits');                                                       //\n                                                                                                                  //\nvar _inherits3 = _interopRequireDefault(_inherits2);                                                              //\n                                                                                                                  //\nvar _react = require('react');                                                                                    // 1\n                                                                                                                  //\nvar _react2 = _interopRequireDefault(_react);                                                                     //\n                                                                                                                  //\nvar _reactDom = require('react-dom');                                                                             // 2\n                                                                                                                  //\nvar _reactDom2 = _interopRequireDefault(_reactDom);                                                               //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 3\n                                                                                                                  //\nvar _reactMeteorData = require('meteor/react-meteor-data');                                                       // 4\n                                                                                                                  //\nvar _msgs = require('../api/msgs.js');                                                                            // 5\n                                                                                                                  //\nvar _users = require('../api/users.js');                                                                          // 6\n                                                                                                                  //\nvar _MsgBox = require('./MsgBox.jsx');                                                                            // 7\n                                                                                                                  //\nvar _MsgBox2 = _interopRequireDefault(_MsgBox);                                                                   //\n                                                                                                                  //\nvar _ChatBox = require('./ChatBox.jsx');                                                                          // 8\n                                                                                                                  //\nvar _ChatBox2 = _interopRequireDefault(_ChatBox);                                                                 //\n                                                                                                                  //\nvar _AccountsUIWrapper = require('./AccountsUIWrapper.jsx');                                                      // 9\n                                                                                                                  //\nvar _AccountsUIWrapper2 = _interopRequireDefault(_AccountsUIWrapper);                                             //\n                                                                                                                  //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                 //\n                                                                                                                  //\nvar App = function (_Component) {                                                                                 //\n  (0, _inherits3['default'])(App, _Component);                                                                    //\n                                                                                                                  //\n  function App(props) {                                                                                           // 11\n    (0, _classCallCheck3['default'])(this, App);                                                                  //\n                                                                                                                  //\n    var _this = (0, _possibleConstructorReturn3['default'])(this, _Component.call(this, props));                  //\n                                                                                                                  //\n    _this.state = {};                                                                                             // 13\n    return _this;                                                                                                 //\n  }                                                                                                               //\n                                                                                                                  //\n  App.prototype.concatMsgs = function () {                                                                        // 10\n    function concatMsgs(msgs) {                                                                                   //\n      var _this2 = this;                                                                                          //\n                                                                                                                  //\n      var fList = [];                                                                                             // 19\n      var result = [];                                                                                            // 20\n      msgs.forEach(function (msg) {                                                                               // 21\n        var fId = msg.send_id == _this2.props.currentUser._id ? msg.recevier_id : msg.send_id;                    // 22\n        if (fList.indexOf(fId) < 0) {                                                                             // 23\n          fList.push(fId);                                                                                        // 24\n          result.push(msg);                                                                                       // 25\n        }                                                                                                         //\n      });                                                                                                         //\n      return result;                                                                                              // 28\n    }                                                                                                             //\n                                                                                                                  //\n    return concatMsgs;                                                                                            //\n  }();                                                                                                            //\n                                                                                                                  //\n  App.prototype.render = function () {                                                                            // 10\n    function render() {                                                                                           //\n      return _react2['default'].createElement(                                                                    // 32\n        'div',                                                                                                    //\n        { className: 'container' },                                                                               //\n        _react2['default'].createElement(_AccountsUIWrapper2['default'], null),                                   //\n        _react2['default'].createElement(_MsgBox2['default'], { msgs: this.concatMsgs(this.props.msgs) }),        //\n        _react2['default'].createElement(_ChatBox2['default'], null)                                              //\n      )                                                                                                           //\n      // msgs={ this.props.msgs } name={ this.props.name }                                                        //\n      ;                                                                                                           // 32\n    }                                                                                                             //\n                                                                                                                  //\n    return render;                                                                                                //\n  }();                                                                                                            //\n                                                                                                                  //\n  return App;                                                                                                     //\n}(_react.Component);                                                                                              //\n                                                                                                                  //\nApp.propTypes = {                                                                                                 // 43\n  msgs: _react.PropTypes.array.isRequired,                                                                        // 44\n  currentUser: _react.PropTypes.object                                                                            // 45\n};                                                                                                                //\n                                                                                                                  //\nexports['default'] = (0, _reactMeteorData.createContainer)(function () {                                          //\n  _meteor.Meteor.subscribe('msgs');                                                                               // 49\n  _meteor.Meteor.subscribe('users');                                                                              // 50\n  return {                                                                                                        // 51\n    msgs: _msgs.Msgs.find({}).fetch(),                                                                            // 52\n    currentUser: _meteor.Meteor.user()                                                                            // 53\n  };                                                                                                              //\n}, App);                                                                                                          //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"ChatBox.jsx\":[\"babel-runtime/helpers/classCallCheck\",\"babel-runtime/helpers/possibleConstructorReturn\",\"babel-runtime/helpers/inherits\",\"react\",\"react-dom\",\"meteor/meteor\",\"classnames\",\"./ChatBoxItem.jsx\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/ui/ChatBox.jsx                                                                                         //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\n                                                                                                                  //\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                           //\n                                                                                                                  //\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                  //\n                                                                                                                  //\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');                     //\n                                                                                                                  //\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);                            //\n                                                                                                                  //\nvar _inherits2 = require('babel-runtime/helpers/inherits');                                                       //\n                                                                                                                  //\nvar _inherits3 = _interopRequireDefault(_inherits2);                                                              //\n                                                                                                                  //\nvar _react = require('react');                                                                                    // 1\n                                                                                                                  //\nvar _react2 = _interopRequireDefault(_react);                                                                     //\n                                                                                                                  //\nvar _reactDom = require('react-dom');                                                                             // 2\n                                                                                                                  //\nvar _reactDom2 = _interopRequireDefault(_reactDom);                                                               //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 3\n                                                                                                                  //\nvar _classnames = require('classnames');                                                                          // 4\n                                                                                                                  //\nvar _classnames2 = _interopRequireDefault(_classnames);                                                           //\n                                                                                                                  //\nvar _ChatBoxItem = require('./ChatBoxItem.jsx');                                                                  // 6\n                                                                                                                  //\nvar _ChatBoxItem2 = _interopRequireDefault(_ChatBoxItem);                                                         //\n                                                                                                                  //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                 //\n                                                                                                                  //\nvar ChatBox = function (_Component) {                                                                             //\n  (0, _inherits3['default'])(ChatBox, _Component);                                                                //\n                                                                                                                  //\n  function ChatBox() {                                                                                            //\n    (0, _classCallCheck3['default'])(this, ChatBox);                                                              //\n    return (0, _possibleConstructorReturn3['default'])(this, _Component.apply(this, arguments));                  //\n  }                                                                                                               //\n                                                                                                                  //\n  ChatBox.prototype.renderChatList = function () {                                                                //\n    function renderChatList() {                                                                                   //\n      var msgs = this.props.msgs;                                                                                 // 10\n      var name = \"Ann\";                                                                                           // 11\n      return msgs.map(function (msg) {                                                                            // 12\n        return _react2['default'].createElement(_ChatBoxItem2['default'], {                                       // 13\n          key: msg._id,                                                                                           // 15\n          msg: msg,                                                                                               // 16\n          name: name                                                                                              // 17\n        });                                                                                                       //\n      });                                                                                                         //\n    }                                                                                                             //\n                                                                                                                  //\n    return renderChatList;                                                                                        //\n  }();                                                                                                            //\n                                                                                                                  //\n  ChatBox.prototype.handleSubmit = function () {                                                                  // 8\n    function handleSubmit(event) {                                                                                //\n      event.preventDefault();                                                                                     // 24\n      var text = _reactDom2['default'].findDOMNode(this.refs.textInput).value.trim();                             // 25\n                                                                                                                  //\n      // let r_id = this.props.msgs[0].send_id === Meteor.userId() ? this.props.msgs[0].recevier_id : this.props.msgs[0].send_id\n      var r_id = \"jb6BJiYd7aKK2tvG4\";                                                                             // 23\n      _meteor.Meteor.call('msgs.insert', text, r_id);                                                             // 29\n                                                                                                                  //\n      _reactDom2['default'].findDOMNode(this.refs.textInput).value = '';                                          // 31\n    }                                                                                                             //\n                                                                                                                  //\n    return handleSubmit;                                                                                          //\n  }();                                                                                                            //\n                                                                                                                  //\n  ChatBox.prototype.render = function () {                                                                        // 8\n    function render() {                                                                                           //\n      return _react2['default'].createElement(                                                                    // 35\n        'div',                                                                                                    //\n        { className: 'chat-box' },                                                                                //\n        _react2['default'].createElement(                                                                         //\n          'h1',                                                                                                   //\n          { className: 'chat-box-tit' },                                                                          //\n          this.props.name                                                                                         //\n        ),                                                                                                        //\n        _react2['default'].createElement(                                                                         //\n          'ul',                                                                                                   //\n          { className: 'chat-list' },                                                                             //\n          this.renderChatList()                                                                                   //\n        ),                                                                                                        //\n        _react2['default'].createElement(                                                                         //\n          'form',                                                                                                 //\n          { className: 'msg-send', onSubmit: this.handleSubmit.bind(this) },                                      //\n          _react2['default'].createElement('input', { type: 'text', ref: 'textInput', placeholder: 'Type to add new Msgs' })\n        )                                                                                                         //\n      );                                                                                                          //\n    }                                                                                                             //\n                                                                                                                  //\n    return render;                                                                                                //\n  }();                                                                                                            //\n                                                                                                                  //\n  return ChatBox;                                                                                                 //\n}(_react.Component);                                                                                              //\n                                                                                                                  //\nexports['default'] = ChatBox;                                                                                     //\n                                                                                                                  //\n                                                                                                                  //\nChatBox.propTypes = {                                                                                             // 51\n  name: _react.PropTypes.string.isRequired,                                                                       // 52\n  msgs: _react.PropTypes.array.isRequired                                                                         // 53\n};                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"ChatBoxItem.jsx\":[\"babel-runtime/helpers/classCallCheck\",\"babel-runtime/helpers/possibleConstructorReturn\",\"babel-runtime/helpers/inherits\",\"react\",\"meteor/meteor\",\"classnames\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/ui/ChatBoxItem.jsx                                                                                     //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\n                                                                                                                  //\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                           //\n                                                                                                                  //\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                  //\n                                                                                                                  //\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');                     //\n                                                                                                                  //\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);                            //\n                                                                                                                  //\nvar _inherits2 = require('babel-runtime/helpers/inherits');                                                       //\n                                                                                                                  //\nvar _inherits3 = _interopRequireDefault(_inherits2);                                                              //\n                                                                                                                  //\nvar _react = require('react');                                                                                    // 1\n                                                                                                                  //\nvar _react2 = _interopRequireDefault(_react);                                                                     //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 2\n                                                                                                                  //\nvar _classnames = require('classnames');                                                                          // 3\n                                                                                                                  //\nvar _classnames2 = _interopRequireDefault(_classnames);                                                           //\n                                                                                                                  //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                 //\n                                                                                                                  //\nvar ChatBoxItem = function (_Component) {                                                                         //\n  (0, _inherits3['default'])(ChatBoxItem, _Component);                                                            //\n                                                                                                                  //\n  function ChatBoxItem() {                                                                                        //\n    (0, _classCallCheck3['default'])(this, ChatBoxItem);                                                          //\n    return (0, _possibleConstructorReturn3['default'])(this, _Component.apply(this, arguments));                  //\n  }                                                                                                               //\n                                                                                                                  //\n  ChatBoxItem.prototype.render = function () {                                                                    //\n    function render() {                                                                                           //\n      var msg = this.props.msg;                                                                                   // 7\n      var name = this.props.msg.send_id === _meteor.Meteor.userId() ? _meteor.Meteor.user().username : this.props.name;\n      return _react2['default'].createElement(                                                                    // 9\n        'li',                                                                                                     //\n        null,                                                                                                     //\n        _react2['default'].createElement(                                                                         //\n          'div',                                                                                                  //\n          { className: 'chat-wrap' },                                                                             //\n          _react2['default'].createElement(                                                                       //\n            'span',                                                                                               //\n            { className: 'chat-name' },                                                                           //\n            name                                                                                                  //\n          ),                                                                                                      //\n          _react2['default'].createElement(                                                                       //\n            'span',                                                                                               //\n            { className: 'chat-time' },                                                                           //\n            msg.time                                                                                              //\n          ),                                                                                                      //\n          _react2['default'].createElement(                                                                       //\n            'p',                                                                                                  //\n            { className: 'chat-content' },                                                                        //\n            msg.content                                                                                           //\n          )                                                                                                       //\n        )                                                                                                         //\n      );                                                                                                          //\n    }                                                                                                             //\n                                                                                                                  //\n    return render;                                                                                                //\n  }();                                                                                                            //\n                                                                                                                  //\n  return ChatBoxItem;                                                                                             //\n}(_react.Component);                                                                                              //\n                                                                                                                  //\nexports['default'] = ChatBoxItem;                                                                                 //\n                                                                                                                  //\n                                                                                                                  //\nChatBoxItem.propTypes = {                                                                                         // 21\n  msg: _react.PropTypes.object.isRequired,                                                                        // 22\n  name: _react.PropTypes.string.isRequired                                                                        // 23\n};                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"MsgBox.jsx\":[\"babel-runtime/helpers/classCallCheck\",\"babel-runtime/helpers/possibleConstructorReturn\",\"babel-runtime/helpers/inherits\",\"react\",\"meteor/meteor\",\"classnames\",\"./MsgBoxItem.jsx\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/ui/MsgBox.jsx                                                                                          //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\n                                                                                                                  //\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                           //\n                                                                                                                  //\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                  //\n                                                                                                                  //\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');                     //\n                                                                                                                  //\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);                            //\n                                                                                                                  //\nvar _inherits2 = require('babel-runtime/helpers/inherits');                                                       //\n                                                                                                                  //\nvar _inherits3 = _interopRequireDefault(_inherits2);                                                              //\n                                                                                                                  //\nvar _react = require('react');                                                                                    // 1\n                                                                                                                  //\nvar _react2 = _interopRequireDefault(_react);                                                                     //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 2\n                                                                                                                  //\nvar _classnames = require('classnames');                                                                          // 3\n                                                                                                                  //\nvar _classnames2 = _interopRequireDefault(_classnames);                                                           //\n                                                                                                                  //\nvar _MsgBoxItem = require('./MsgBoxItem.jsx');                                                                    // 4\n                                                                                                                  //\nvar _MsgBoxItem2 = _interopRequireDefault(_MsgBoxItem);                                                           //\n                                                                                                                  //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                 //\n                                                                                                                  //\n// MsgBox component - represents user's msg list                                                                  //\n                                                                                                                  //\nvar MsgBox = function (_Component) {                                                                              //\n  (0, _inherits3['default'])(MsgBox, _Component);                                                                 //\n                                                                                                                  //\n  function MsgBox() {                                                                                             //\n    (0, _classCallCheck3['default'])(this, MsgBox);                                                               //\n    return (0, _possibleConstructorReturn3['default'])(this, _Component.apply(this, arguments));                  //\n  }                                                                                                               //\n                                                                                                                  //\n  MsgBox.prototype.renderMsgList = function () {                                                                  //\n    function renderMsgList() {                                                                                    //\n      var msgs = this.props.msgs;                                                                                 // 8\n      return msgs.map(function (msg) {                                                                            // 9\n        return _react2['default'].createElement(_MsgBoxItem2['default'], {                                        // 10\n          key: msg._id,                                                                                           // 12\n          msg: msg                                                                                                // 13\n        });                                                                                                       //\n      });                                                                                                         //\n    }                                                                                                             //\n                                                                                                                  //\n    return renderMsgList;                                                                                         //\n  }();                                                                                                            //\n                                                                                                                  //\n  MsgBox.prototype.unreadMsgCount = function () {                                                                 // 6\n    function unreadMsgCount() {                                                                                   //\n      var msgs = this.props.msgs;                                                                                 // 19\n      var count = 0;                                                                                              // 20\n      msgs.forEach(function (msg) {                                                                               // 21\n        if (msg.isUnread) {                                                                                       // 22\n          count++;                                                                                                // 23\n        }                                                                                                         //\n      });                                                                                                         //\n      return count;                                                                                               // 26\n    }                                                                                                             //\n                                                                                                                  //\n    return unreadMsgCount;                                                                                        //\n  }();                                                                                                            //\n                                                                                                                  //\n  MsgBox.prototype.render = function () {                                                                         // 6\n    function render() {                                                                                           //\n      return _react2['default'].createElement(                                                                    // 29\n        'div',                                                                                                    //\n        { className: 'page' },                                                                                    //\n        _react2['default'].createElement(                                                                         //\n          'h1',                                                                                                   //\n          { className: 'page-title' },                                                                            //\n          'My Messages',                                                                                          //\n          _react2['default'].createElement(                                                                       //\n            'div',                                                                                                //\n            { className: 'msg-count' },                                                                           //\n            _react2['default'].createElement(                                                                     //\n              'span',                                                                                             //\n              { className: 'msg-count-unread' },                                                                  //\n              ' ',                                                                                                //\n              this.unreadMsgCount(),                                                                              //\n              ' '                                                                                                 //\n            ),                                                                                                    //\n            ' / ',                                                                                                //\n            this.props.msgs.length                                                                                //\n          )                                                                                                       //\n        ),                                                                                                        //\n        _react2['default'].createElement(                                                                         //\n          'ul',                                                                                                   //\n          { className: 'msg-list' },                                                                              //\n          this.renderMsgList()                                                                                    //\n        )                                                                                                         //\n      );                                                                                                          //\n    }                                                                                                             //\n                                                                                                                  //\n    return render;                                                                                                //\n  }();                                                                                                            //\n                                                                                                                  //\n  return MsgBox;                                                                                                  //\n}(_react.Component);                                                                                              //\n                                                                                                                  //\nexports['default'] = MsgBox;                                                                                      //\n                                                                                                                  //\n                                                                                                                  //\nMsgBox.propTypes = {                                                                                              // 45\n  msgs: _react.PropTypes.array.isRequired                                                                         // 46\n};                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}],\"MsgBoxItem.jsx\":[\"babel-runtime/helpers/classCallCheck\",\"babel-runtime/helpers/possibleConstructorReturn\",\"babel-runtime/helpers/inherits\",\"react\",\"meteor/meteor\",\"classnames\",\"../api/users.js\",function(require,exports){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// imports/ui/MsgBoxItem.jsx                                                                                      //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nexports.__esModule = true;                                                                                        //\n                                                                                                                  //\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');                                           //\n                                                                                                                  //\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);                                                  //\n                                                                                                                  //\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');                     //\n                                                                                                                  //\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);                            //\n                                                                                                                  //\nvar _inherits2 = require('babel-runtime/helpers/inherits');                                                       //\n                                                                                                                  //\nvar _inherits3 = _interopRequireDefault(_inherits2);                                                              //\n                                                                                                                  //\nvar _react = require('react');                                                                                    // 1\n                                                                                                                  //\nvar _react2 = _interopRequireDefault(_react);                                                                     //\n                                                                                                                  //\nvar _meteor = require('meteor/meteor');                                                                           // 2\n                                                                                                                  //\nvar _classnames = require('classnames');                                                                          // 3\n                                                                                                                  //\nvar _classnames2 = _interopRequireDefault(_classnames);                                                           //\n                                                                                                                  //\nvar _users = require('../api/users.js');                                                                          // 4\n                                                                                                                  //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }                 //\n                                                                                                                  //\n// MsgBoxItem component - represents msg item of user's msgBox list                                               //\n                                                                                                                  //\nvar MsgBoxItem = function (_Component) {                                                                          //\n  (0, _inherits3['default'])(MsgBoxItem, _Component);                                                             //\n                                                                                                                  //\n  function MsgBoxItem(props) {                                                                                    // 7\n    (0, _classCallCheck3['default'])(this, MsgBoxItem);                                                           //\n                                                                                                                  //\n    var _this = (0, _possibleConstructorReturn3['default'])(this, _Component.call(this, props));                  //\n                                                                                                                  //\n    _this.state = {                                                                                               // 9\n      friendName: '',                                                                                             // 10\n      chatMsg: ''                                                                                                 // 11\n    };                                                                                                            //\n    return _this;                                                                                                 //\n  }                                                                                                               //\n                                                                                                                  //\n  MsgBoxItem.prototype.getFriendName = function () {                                                              // 6\n    function getFriendName(msg) {                                                                                 //\n      var _this2 = this;                                                                                          //\n                                                                                                                  //\n      var f_id = msg.send_id == _meteor.Meteor.userId() ? msg.recevier_id : msg.send_id;                          // 16\n      _meteor.Meteor.call('findUser', f_id, function (err, res) {                                                 // 17\n        _this2.setState({ friendName: res.username });                                                            // 18\n      });                                                                                                         //\n    }                                                                                                             //\n                                                                                                                  //\n    return getFriendName;                                                                                         //\n  }();                                                                                                            //\n                                                                                                                  //\n  MsgBoxItem.prototype.componentWillMount = function () {                                                         // 6\n    function componentWillMount() {                                                                               //\n      this.getFriendName(this.props.msg);                                                                         // 23\n    }                                                                                                             //\n                                                                                                                  //\n    return componentWillMount;                                                                                    //\n  }();                                                                                                            //\n                                                                                                                  //\n  MsgBoxItem.prototype.renderMsg = function () {                                                                  // 6\n    function renderMsg(msg) {                                                                                     //\n      var f_id = msg.send_id == _meteor.Meteor.userId() ? msg.recevier_id : msg.send_id;                          // 27\n      _meteor.Meteor.call('chatMsg', f_id, function (err, res) {                                                  // 28\n        console.log(res, 'chatMsgs');                                                                             // 29\n      });                                                                                                         //\n    }                                                                                                             //\n                                                                                                                  //\n    return renderMsg;                                                                                             //\n  }();                                                                                                            //\n                                                                                                                  //\n  MsgBoxItem.prototype.render = function () {                                                                     // 6\n    function render() {                                                                                           //\n      var msg = this.props.msg;                                                                                   // 34\n      var itemClassName = (0, _classnames2['default'])({                                                          // 35\n        'msg-item': true,                                                                                         // 36\n        'msg-item--unread': msg.isUnread                                                                          // 37\n      });                                                                                                         //\n      return _react2['default'].createElement(                                                                    // 39\n        'li',                                                                                                     //\n        { className: itemClassName },                                                                             //\n        _react2['default'].createElement(                                                                         //\n          'div',                                                                                                  //\n          { className: 'msg-item_name' },                                                                         //\n          ' ',                                                                                                    //\n          this.state.friendName,                                                                                  //\n          ' '                                                                                                     //\n        ),                                                                                                        //\n        _react2['default'].createElement(                                                                         //\n          'div',                                                                                                  //\n          { calssNmae: 'msg-item-content' },                                                                      //\n          _react2['default'].createElement(                                                                       //\n            'span',                                                                                               //\n            { calssNmae: 'msg-item-time' },                                                                       //\n            ' ',                                                                                                  //\n            msg.time.toLocaleDateString() + '  ' + msg.time.toLocaleTimeString()                                  //\n          ),                                                                                                      //\n          _react2['default'].createElement(                                                                       //\n            'p',                                                                                                  //\n            null,                                                                                                 //\n            msg.content,                                                                                          //\n            ' '                                                                                                   //\n          )                                                                                                       //\n        ),                                                                                                        //\n        _react2['default'].createElement(                                                                         //\n          'span',                                                                                                 //\n          null,                                                                                                   //\n          this.renderMsg(msg)                                                                                     //\n        )                                                                                                         //\n      );                                                                                                          //\n    }                                                                                                             //\n                                                                                                                  //\n    return render;                                                                                                //\n  }();                                                                                                            //\n                                                                                                                  //\n  return MsgBoxItem;                                                                                              //\n}(_react.Component);                                                                                              //\n                                                                                                                  //\nexports['default'] = MsgBoxItem;                                                                                  //\n                                                                                                                  //\n                                                                                                                  //\nMsgBoxItem.propTypes = {                                                                                          // 52\n  msg: _react.PropTypes.object.isRequired                                                                         // 53\n};                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}]}}},{\"extensions\":[\".js\",\".json\",\".html\",\".jsx\",\".less\"]});\nrequire(\"./client/main.html\");\nrequire(\"./client/main.jsx\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/client/main.jsx","/imports/api/msgs.js","/imports/api/users.js","/imports/startup/accounts-config.js","/imports/ui/AccountsUIWrapper.jsx","/imports/ui/App.jsx","/imports/ui/ChatBox.jsx","/imports/ui/ChatBoxItem.jsx","/imports/ui/MsgBox.jsx","/imports/ui/MsgBoxItem.jsx"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["import React from 'react';\nimport { Meteor } from 'meteor/meteor';\nimport { render } from 'react-dom';\n \nimport '../imports/startup/accounts-config.js';\nimport App from '../imports/ui/App.jsx';\n \nMeteor.startup(() => {\n  render(<App />, document.getElementById('render-target'));\n});","import { Meteor } from 'meteor/meteor'\nimport { Mongo } from 'meteor/mongo'\nimport { check } from 'meteor/check'\n \nexport const Msgs = new Mongo.Collection('msgs');\nif (Meteor.isServer) {\n  Meteor.publish('msgs', function msgsPublication() {\n    return Msgs.find({\n      $or: [\n        { send_id: this.userId },\n        { recevier_id: this.userId },\n      ],\n    })\n  })\n} \nMeteor.methods({\n  chatMsg: function(friend_id){\n    console.log(this.userId, friend_id, 'xx')\n    check(friend_id, String)\n    return Msgs.find({\n      $or: [\n        {send_id: this.userId, recevier_id: friend_id}, \n        {recevier_id: friend_id, send_id: this.userId}\n      ] \n    }).fetch()\n  },\n\n  'msgs.insert'(text, r_id) {\n    check(text, String)\n\n    if (! Meteor.userId()) {\n      throw new Meteor.Error('not-authorized')\n    }\n\n    Msgs.insert({\n      send_id: Meteor.userId(),\n      recevier_id: r_id,\n      content: text,\n      time: new Date(),\n      isUnread: true\n    })\n  }\n})","import { Meteor } from 'meteor/meteor'\nimport { Mongo } from 'meteor/mongo'\nimport { check } from 'meteor/check'\n \nexport const Users = Meteor.users;\nif (Meteor.isServer) {\n  Meteor.publish('users', function usersPublication() {\n    return Users.find({})\n  })\n} \nMeteor.methods({\n  findUser: function(u_id) {\n    return Users.findOne({\n      _id: u_id\n    }, {\n      fields: {\n        'username': 1\n      }\n    });\n  }\n});","import { Accounts } from 'meteor/accounts-base';\n \nAccounts.ui.config({\n  passwordSignupFields: 'USERNAME_ONLY',\n});","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\n \nexport default class AccountsUIWrapper extends Component {\n  componentDidMount() {\n    // Use Meteor Blaze to render login buttons\n    this.view = Blaze.render(Template.loginButtons,\n      ReactDOM.findDOMNode(this.refs.container));\n  }\n  componentWillUnmount() {\n    // Clean up Blaze view\n    Blaze.remove(this.view);\n  }\n  render() {\n    // Just render a placeholder container that will be filled in\n    return <span ref=\"container\" />;\n  }\n}","import React, { Component, PropTypes } from 'react'\nimport ReactDOM from 'react-dom'\nimport { Meteor } from 'meteor/meteor'\nimport { createContainer } from 'meteor/react-meteor-data'\nimport { Msgs } from '../api/msgs.js'\nimport { Users } from '../api/users.js'\nimport MsgBox from './MsgBox.jsx'\nimport ChatBox from './ChatBox.jsx'\nimport AccountsUIWrapper from './AccountsUIWrapper.jsx'\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      \n    }\n  }\n\n  concatMsgs (msgs) {\n    let fList = []\n    let result = []\n    msgs.forEach((msg) => {\n      let fId = msg.send_id == this.props.currentUser._id ? msg.recevier_id : msg.send_id\n      if(fList.indexOf(fId) < 0){\n        fList.push(fId)\n        result.push(msg)\n      }\n    })\n    return result\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <AccountsUIWrapper />\n        <MsgBox msgs={ this.concatMsgs(this.props.msgs) }/>\n        <ChatBox/>\n      </div>\n       // msgs={ this.props.msgs } name={ this.props.name }  \n    );\n  }\n}\n \nApp.propTypes = {\n  msgs: PropTypes.array.isRequired,\n  currentUser: PropTypes.object,\n};\n \nexport default createContainer(() => {\n  Meteor.subscribe('msgs');\n  Meteor.subscribe('users');\n  return {\n    msgs: Msgs.find({}).fetch(),\n    currentUser: Meteor.user(),\n  };\n}, App);","import React, { Component, PropTypes } from 'react'\nimport ReactDOM from 'react-dom'\nimport { Meteor } from 'meteor/meteor'\nimport classnames from 'classnames'\n\nimport ChatBoxItem from './ChatBoxItem.jsx'\n\nexport default class ChatBox extends Component {\n  renderChatList() {\n    let msgs = this.props.msgs\n    const name = \"Ann\"\n    return msgs.map((msg) => {\n      return (\n        <ChatBoxItem\n         key={msg._id}\n         msg={msg}\n         name={name}\n        />\n      )\n    })\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    const text = ReactDOM.findDOMNode(this.refs.textInput).value.trim()\n    \n    // let r_id = this.props.msgs[0].send_id === Meteor.userId() ? this.props.msgs[0].recevier_id : this.props.msgs[0].send_id\n    let r_id = \"jb6BJiYd7aKK2tvG4\"\n    Meteor.call('msgs.insert', text, r_id)\n\n    ReactDOM.findDOMNode(this.refs.textInput).value = ''\n  }\n\n  render() {\n    return (\n      <div className=\"chat-box\">\n        <h1 className=\"chat-box-tit\">\n          { this.props.name }\n        </h1>\n        <ul className=\"chat-list\">\n          { this.renderChatList() }\n        </ul>\n        <form className=\"msg-send\" onSubmit={this.handleSubmit.bind(this)}>\n          <input type=\"text\" ref=\"textInput\" placeholder=\"Type to add new Msgs\"/>\n        </form>\n      </div>\n    )\n  }\n}\n\nChatBox.propTypes = {\n  name: PropTypes.string.isRequired,\n  msgs: PropTypes.array.isRequired\n}\n","import React, { Component, PropTypes } from 'react'\nimport { Meteor } from 'meteor/meteor'\nimport classnames from 'classnames'\n\nexport default class ChatBoxItem extends Component {\n  render() {\n    const msg = this.props.msg\n    const name = this.props.msg.send_id === Meteor.userId() ? Meteor.user().username : this.props.name\n    return (\n      <li>\n        <div className=\"chat-wrap\">\n          <span className=\"chat-name\">{ name }</span>\n          <span className=\"chat-time\">{ msg.time }</span>\n          <p className=\"chat-content\">{ msg.content }</p>\n        </div>\n      </li>\n    )\n  }\n}\n\nChatBoxItem.propTypes = {\n  msg: PropTypes.object.isRequired,\n  name: PropTypes.string.isRequired\n}\n\n","import React, { Component, PropTypes } from 'react'\nimport { Meteor } from 'meteor/meteor'\nimport classnames from 'classnames'\nimport MsgBoxItem from \"./MsgBoxItem.jsx\"\n// MsgBox component - represents user's msg list\nexport default class MsgBox extends Component {\n  renderMsgList () {\n    let msgs = this.props.msgs\n    return msgs.map((msg) => {\n      return (\n        <MsgBoxItem\n          key={msg._id}\n          msg={msg}\n        />\n      )\n    })\n  }\n  unreadMsgCount () {\n    let msgs = this.props.msgs\n    let count = 0\n    msgs.forEach(function(msg) {\n      if(msg.isUnread) {\n        count++\n      }\n    })\n    return count\n  }\n  render () {\n    return (\n      <div className=\"page\">\n        <h1 className=\"page-title\">\n          My Messages\n          <div className=\"msg-count\">\n            <span className=\"msg-count-unread\"> { this.unreadMsgCount() } </span> / { this.props.msgs.length }\n          </div>\n        </h1>\n        <ul className=\"msg-list\">  \n          { this.renderMsgList() }\n        </ul>\n      </div>\n    )\n  }\n}\n \nMsgBox.propTypes = {\n  msgs: PropTypes.array.isRequired\n}","import React, { Component, PropTypes } from 'react'\nimport { Meteor } from 'meteor/meteor'\nimport classnames from 'classnames'\nimport { Users } from '../api/users.js'\n// MsgBoxItem component - represents msg item of user's msgBox list\nexport default class MsgBoxItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      friendName: '',\n      chatMsg: ''\n    }\n  }\n\n  getFriendName (msg) {\n    let f_id = msg.send_id == Meteor.userId() ? msg.recevier_id : msg.send_id\n    Meteor.call('findUser', f_id, (err, res) => {\n      this.setState({ friendName: res.username })\n    })\n  }\n\n  componentWillMount () {\n    this.getFriendName(this.props.msg)\n  }\n\n  renderMsg(msg) {\n    let f_id = msg.send_id == Meteor.userId() ? msg.recevier_id : msg.send_id\n    Meteor.call('chatMsg', f_id, (err, res) => {\n      console.log(res,'chatMsgs')\n    })\n  }\n\n  render () {\n    const msg = this.props.msg\n    const itemClassName = classnames({\n      'msg-item': true,\n      'msg-item--unread': msg.isUnread\n    })\n    return (\n      <li className={itemClassName}>\n        <div className=\"msg-item_name\"> { this.state.friendName } </div> \n        <div calssNmae=\"msg-item-content\"> \n          <span calssNmae=\"msg-item-time\"> { `${msg.time.toLocaleDateString()}  ${msg.time.toLocaleTimeString()}` }</span>\n          <p>{ msg.content } </p>\n        </div>  \n        <span>{ this.renderMsg(msg) }</span>\n      </li>\n    )\n  }\n}\n \nMsgBoxItem.propTypes = {\n  msg: PropTypes.object.isRequired\n}"]}}]