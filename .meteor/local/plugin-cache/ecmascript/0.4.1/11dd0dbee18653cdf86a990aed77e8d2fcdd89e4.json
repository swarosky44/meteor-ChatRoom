{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"classnames","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"classnames"}]},{"source":"./MsgBoxItem.jsx","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"MsgBoxItem"}]}],"exports":{"exported":["MsgBox"],"specifiers":[{"kind":"local","local":"MsgBox","exported":"default"}]}}},"options":{"filename":"/imports/ui/MsgBox.jsx","filenameRelative":"/imports/ui/MsgBox.jsx","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/ui/MsgBox.jsx.map","sourceFileName":"/imports/ui/MsgBox.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"MsgBox"},"ignored":false,"code":"exports.__esModule = true;\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _meteor = require('meteor/meteor');\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _MsgBoxItem = require('./MsgBoxItem.jsx');\n\nvar _MsgBoxItem2 = _interopRequireDefault(_MsgBoxItem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n// MsgBox component - represents user's msg list\n\nvar MsgBox = function (_Component) {\n  (0, _inherits3['default'])(MsgBox, _Component);\n\n  function MsgBox() {\n    (0, _classCallCheck3['default'])(this, MsgBox);\n    return (0, _possibleConstructorReturn3['default'])(this, _Component.apply(this, arguments));\n  }\n\n  MsgBox.prototype.renderMsgList = function () {\n    function renderMsgList() {\n      var msgs = this.props.msgs;\n      return msgs.map(function (msg) {\n        var f_id = msg.send_id == _meteor.Meteor.userId() ? msg.recevier_id : msg.send_id;\n        return _react2['default'].createElement(_MsgBoxItem2['default'], {\n          key: msg._id,\n          msg: msg\n        });\n      });\n    }\n\n    return renderMsgList;\n  }();\n\n  MsgBox.prototype.unreadMsgCount = function () {\n    function unreadMsgCount() {\n      var msgs = this.props.msgs;\n      var count = 0;\n      msgs.forEach(function (msg) {\n        if (msg.isUnread) {\n          count++;\n        }\n      });\n      return count;\n    }\n\n    return unreadMsgCount;\n  }();\n\n  MsgBox.prototype.render = function () {\n    function render() {\n      return _react2['default'].createElement(\n        'div',\n        { className: 'page msg-box' },\n        _react2['default'].createElement(\n          'h1',\n          { className: 'page-title' },\n          'My Messages',\n          _react2['default'].createElement(\n            'div',\n            { className: 'page-title_msg-count' },\n            _react2['default'].createElement(\n              'span',\n              { className: 'page-title_msg-count--unread' },\n              ' ',\n              this.unreadMsgCount(),\n              ' '\n            ),\n            ' / ',\n            this.props.msgs.length\n          )\n        ),\n        _react2['default'].createElement(\n          'ul',\n          { className: 'msg-list' },\n          this.renderMsgList()\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return MsgBox;\n}(_react.Component);\n\nexports['default'] = MsgBox;\n\n\nMsgBox.propTypes = {\n  msgs: _react.PropTypes.array.isRequired\n};","ast":null,"map":{"version":3,"sources":["/imports/ui/MsgBox.jsx"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;;;IAEqB;;;;;;;;mBACnB;6BAAiB;AACf,UAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CADI;AAEf,aAAO,KAAK,GAAL,CAAS,UAAC,GAAD,EAAS;AACvB,YAAI,OAAO,IAAI,OAAJ,IAAe,eAAO,MAAP,EAAf,GAAiC,IAAI,WAAJ,GAAkB,IAAI,OAAJ,CADvC;AAEvB,eACE;AACE,eAAK,IAAI,GAAJ;AACL,eAAK,GAAL;SAFF,CADF,CAFuB;OAAT,CAAhB,CAFe;;;;;;AADE,mBAanB;8BAAkB;AAChB,UAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CADK;AAEhB,UAAI,QAAQ,CAAR,CAFY;AAGhB,WAAK,OAAL,CAAa,UAAS,GAAT,EAAc;AACzB,YAAG,IAAI,QAAJ,EAAc;AACf,kBADe;SAAjB;OADW,CAAb,CAHgB;AAQhB,aAAO,KAAP,CARgB;;;;;;AAbC,mBAuBnB;sBAAU;AACR,aACE;;UAAK,WAAU,cAAV,EAAL;QACE;;YAAI,WAAU,YAAV,EAAJ;;UAEE;;cAAK,WAAU,sBAAV,EAAL;YACE;;gBAAM,WAAU,8BAAV,EAAN;;cAAkD,KAAK,cAAL,EAAlD;;aADF;;YACwF,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB;WAH1F;SADF;QAOE;;YAAI,WAAU,UAAV,EAAJ;UACI,KAAK,aAAL,EADJ;SAPF;OADF,CADQ;;;;;;SAvBS;;;;;;AAwCrB,OAAO,SAAP,GAAmB;AACjB,QAAM,iBAAU,KAAV,CAAgB,UAAhB;CADR","file":"/imports/ui/MsgBox.jsx.map","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport { Meteor } from 'meteor/meteor'\nimport classnames from 'classnames'\nimport MsgBoxItem from \"./MsgBoxItem.jsx\"\n// MsgBox component - represents user's msg list\nexport default class MsgBox extends Component {\n  renderMsgList () {\n    let msgs = this.props.msgs\n    return msgs.map((msg) => {\n      let f_id = msg.send_id == Meteor.userId() ? msg.recevier_id : msg.send_id\n      return (\n        <MsgBoxItem\n          key={msg._id}\n          msg={msg}\n        />\n      )\n    })\n  }\n  unreadMsgCount () {\n    let msgs = this.props.msgs\n    let count = 0\n    msgs.forEach(function(msg) {\n      if(msg.isUnread) {\n        count++\n      }\n    })\n    return count\n  }\n  render () {\n    return (\n      <div className=\"page msg-box\">\n        <h1 className=\"page-title\">\n          My Messages\n          <div className=\"page-title_msg-count\">\n            <span className=\"page-title_msg-count--unread\"> { this.unreadMsgCount() } </span> / { this.props.msgs.length }\n          </div>\n        </h1>\n        <ul className=\"msg-list\">  \n          { this.renderMsgList() }\n        </ul>\n      </div>\n    )\n  }\n}\n \nMsgBox.propTypes = {\n  msgs: PropTypes.array.isRequired\n}"]},"hash":"11dd0dbee18653cdf86a990aed77e8d2fcdd89e4"}
