{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"classnames","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"classnames"}]},{"source":"react-router","imported":["Link"],"specifiers":[{"kind":"named","imported":"Link","local":"Link"}]}],"exports":{"exported":["MsgBoxItem"],"specifiers":[{"kind":"local","local":"MsgBoxItem","exported":"default"}]}}},"options":{"filename":"/imports/ui/MsgBoxItem.jsx","filenameRelative":"/imports/ui/MsgBoxItem.jsx","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/ui/MsgBoxItem.jsx.map","sourceFileName":"/imports/ui/MsgBoxItem.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"MsgBoxItem"},"ignored":false,"code":"exports.__esModule = true;\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _meteor = require('meteor/meteor');\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _reactRouter = require('react-router');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar MsgBoxItem = function (_Component) {\n  (0, _inherits3['default'])(MsgBoxItem, _Component);\n\n  function MsgBoxItem() {\n    (0, _classCallCheck3['default'])(this, MsgBoxItem);\n    return (0, _possibleConstructorReturn3['default'])(this, _Component.apply(this, arguments));\n  }\n\n  MsgBoxItem.prototype.readThisMsg = function () {\n    function readThisMsg() {\n      var _id = this.props.msg._id;\n      if (this.props.msg.isUnread) {\n        _meteor.Meteor.call('msgs.setUnread', _id);\n      }\n    }\n\n    return readThisMsg;\n  }();\n\n  MsgBoxItem.prototype.render = function () {\n    function render() {\n      var msg = this.props.msg;\n      var friend_id = msg.sender.id == _meteor.Meteor.userId() ? msg.recevier.id : msg.sender.id;\n      console.log(_meteor.Meteor.user(), ' is my name! <=======>');\n      var friend_name = msg.sender.name == _meteor.Meteor.user().username ? msg.recevier.name : msg.sender.name;\n      var itemClassName = (0, _classnames2['default'])({\n        'msg-item': true,\n        'msg-item--unread': msg.isUnread\n      });\n      return _react2['default'].createElement(\n        'li',\n        { className: itemClassName },\n        _react2['default'].createElement(\n          _reactRouter.Link,\n          { to: '/' + friend_id, onClick: this.readThisMsg.bind(this) },\n          _react2['default'].createElement(\n            'div',\n            { className: 'msg-item_name' },\n            ' ',\n            friend_name,\n            ' '\n          ),\n          _react2['default'].createElement(\n            'div',\n            { className: 'msg-item_content' },\n            _react2['default'].createElement(\n              'span',\n              { className: 'msg-item_time' },\n              ' ',\n              msg.time.toLocaleDateString() + '  ' + msg.time.toLocaleTimeString()\n            ),\n            _react2['default'].createElement(\n              'p',\n              null,\n              msg.content,\n              ' '\n            )\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return MsgBoxItem;\n}(_react.Component);\n\nexports['default'] = MsgBoxItem;\n\n\nMsgBoxItem.propTypes = {\n  msg: _react.PropTypes.object.isRequired\n};","ast":null,"map":{"version":3,"sources":["/imports/ui/MsgBoxItem.jsx"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;IAGqB;;;;;;;;uBAEnB;2BAAc;AACZ,UAAI,MAAM,KAAK,KAAL,CAAW,GAAX,CAAe,GAAf,CADE;AAEZ,UAAI,KAAK,KAAL,CAAW,GAAX,CAAe,QAAf,EAAyB;AAC3B,uBAAO,IAAP,CAAY,gBAAZ,EAA8B,GAA9B,EAD2B;OAA7B;;;;;;AAJiB,uBASnB;sBAAU;AACR,UAAM,MAAM,KAAK,KAAL,CAAW,GAAX,CADJ;AAER,UAAM,YAAY,IAAI,MAAJ,CAAW,EAAX,IAAiB,eAAO,MAAP,EAAjB,GAAmC,IAAI,QAAJ,CAAa,EAAb,GAAkB,IAAI,MAAJ,CAAW,EAAX,CAF/D;AAGR,cAAQ,GAAR,CAAY,eAAO,IAAP,EAAZ,EAA2B,wBAA3B,EAHQ;AAIR,UAAM,cAAc,IAAI,MAAJ,CAAW,IAAX,IAAmB,eAAO,IAAP,GAAc,QAAd,GAAyB,IAAI,QAAJ,CAAa,IAAb,GAAoB,IAAI,MAAJ,CAAW,IAAX,CAJ5E;AAKR,UAAM,gBAAgB,6BAAW;AAC/B,oBAAY,IAAZ;AACA,4BAAoB,IAAI,QAAJ;OAFA,CAAhB,CALE;AASR,aACE;;UAAI,WAAW,aAAX,EAAJ;QACE;;YAAM,UAAQ,SAAR,EAAqB,SAAS,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAT,EAA3B;UACA;;cAAK,WAAU,eAAV,EAAL;;YAAkC,WAAlC;;WADA;UAEA;;cAAK,WAAU,kBAAV,EAAL;YACE;;gBAAM,WAAU,eAAV,EAAN;;cAAsC,IAAI,IAAJ,CAAS,kBAAT,YAAkC,IAAI,IAAJ,CAAS,kBAAT,EAAxE;aADF;YAEE;;;cAAK,IAAI,OAAJ;iBAAL;aAFF;WAFA;SADF;OADF,CATQ;;;;;;SATS;;;;;;AAgCrB,WAAW,SAAX,GAAuB;AACrB,OAAK,iBAAU,MAAV,CAAiB,UAAjB;CADP","file":"/imports/ui/MsgBoxItem.jsx.map","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport { Meteor } from 'meteor/meteor'\nimport classnames from 'classnames'\nimport { Link } from 'react-router'\n\n\nexport default class MsgBoxItem extends Component {\n\n  readThisMsg() {\n    let _id = this.props.msg._id\n    if (this.props.msg.isUnread) {\n      Meteor.call('msgs.setUnread', _id)\n    }\n  }\n\n  render () {\n    const msg = this.props.msg\n    const friend_id = msg.sender.id == Meteor.userId() ? msg.recevier.id : msg.sender.id\n    console.log(Meteor.user(), ' is my name! <=======>')\n    const friend_name = msg.sender.name == Meteor.user().username ? msg.recevier.name : msg.sender.name\n    const itemClassName = classnames({\n      'msg-item': true,\n      'msg-item--unread': msg.isUnread\n    })\n    return (\n      <li className={itemClassName}>\n        <Link to={`/${friend_id}`} onClick={this.readThisMsg.bind(this)}>\n        <div className=\"msg-item_name\"> { friend_name } </div> \n        <div className=\"msg-item_content\"> \n          <span className=\"msg-item_time\"> { `${msg.time.toLocaleDateString()}  ${msg.time.toLocaleTimeString()}` }</span>\n          <p>{ msg.content } </p>\n        </div>  \n        </Link>\n      </li>\n    )\n  }\n}\n \nMsgBoxItem.propTypes = {\n  msg: PropTypes.object.isRequired\n}\n"]},"hash":"7367e3af3d3fd4e6f9ea597f09bc489265681e25"}
