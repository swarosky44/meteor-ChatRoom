{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/mongo/local_collection_driver.js","filenameRelative":"/packages/mongo/local_collection_driver.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/mongo/local_collection_driver.js.map","sourceFileName":"/packages/mongo/local_collection_driver.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"local_collection_driver"},"ignored":false,"code":"LocalCollectionDriver = function LocalCollectionDriver() {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function ensureCollection(name, collections) {\n  if (!(name in collections)) collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function () {\n    function open(name, conn) {\n      var self = this;\n      if (!name) return new LocalCollection();\n      if (!conn) {\n        return ensureCollection(name, self.noConnCollections);\n      }\n      if (!conn._mongo_livedata_collections) conn._mongo_livedata_collections = {};\n      // XXX is there a way to keep track of a connection's collections without\n      // dangling it off the connection object?\n      return ensureCollection(name, conn._mongo_livedata_collections);\n    }\n\n    return open;\n  }()\n});\n\n// singleton\nLocalCollectionDriver = new LocalCollectionDriver();","ast":null,"map":{"version":3,"sources":["/packages/mongo/local_collection_driver.js"],"names":[],"mappings":"AAAA,wBAAwB,iCAAY;AAClC,MAAI,OAAO,IAAP,CAD8B;AAElC,OAAK,iBAAL,GAAyB,EAAzB,CAFkC;CAAZ;;AAKxB,IAAI,mBAAmB,SAAnB,gBAAmB,CAAU,IAAV,EAAgB,WAAhB,EAA6B;AAClD,MAAI,EAAE,QAAQ,WAAR,CAAF,EACF,YAAY,IAAZ,IAAoB,IAAI,eAAJ,CAAoB,IAApB,CAApB,CADF;AAEA,SAAO,YAAY,IAAZ,CAAP,CAHkD;CAA7B;;AAMvB,EAAE,MAAF,CAAS,sBAAsB,SAAtB,EAAiC;AACxC;AAAM,kBAAU,IAAV,EAAgB,IAAhB,EAAsB;AAC1B,UAAI,OAAO,IAAP,CADsB;AAE1B,UAAI,CAAC,IAAD,EACF,OAAO,IAAI,eAAJ,EAAP,CADF;AAEA,UAAI,CAAE,IAAF,EAAQ;AACV,eAAO,iBAAiB,IAAjB,EAAuB,KAAK,iBAAL,CAA9B,CADU;OAAZ;AAGA,UAAI,CAAE,KAAK,2BAAL,EACJ,KAAK,2BAAL,GAAmC,EAAnC,CADF;;;AAP0B,aAWnB,iBAAiB,IAAjB,EAAuB,KAAK,2BAAL,CAA9B,CAX0B;KAAtB;;;KAAN;CADF;;;AAiBA,wBAAwB,IAAI,qBAAJ,EAAxB","file":"/packages/mongo/local_collection_driver.js.map","sourcesContent":["LocalCollectionDriver = function () {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function (name, collections) {\n  if (!(name in collections))\n    collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function (name, conn) {\n    var self = this;\n    if (!name)\n      return new LocalCollection;\n    if (! conn) {\n      return ensureCollection(name, self.noConnCollections);\n    }\n    if (! conn._mongo_livedata_collections)\n      conn._mongo_livedata_collections = {};\n    // XXX is there a way to keep track of a connection's collections without\n    // dangling it off the connection object?\n    return ensureCollection(name, conn._mongo_livedata_collections);\n  }\n});\n\n// singleton\nLocalCollectionDriver = new LocalCollectionDriver;\n"]},"hash":"e931505e451bc5f76293513d7a207fadebb75194"}
