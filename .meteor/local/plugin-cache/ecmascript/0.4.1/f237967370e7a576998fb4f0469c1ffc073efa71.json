{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"react-dom","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ReactDOM"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/react-meteor-data","imported":["createContainer"],"specifiers":[{"kind":"named","imported":"createContainer","local":"createContainer"}]},{"source":"../api/msgs.js","imported":["Msgs"],"specifiers":[{"kind":"named","imported":"Msgs","local":"Msgs"}]},{"source":"../api/users.js","imported":["Users"],"specifiers":[{"kind":"named","imported":"Users","local":"Users"}]},{"source":"./MsgBox.jsx","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"MsgBox"}]},{"source":"./AccountsUIWrapper.jsx","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"AccountsUIWrapper"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/ui/App.jsx","filenameRelative":"/imports/ui/App.jsx","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/ui/App.jsx.map","sourceFileName":"/imports/ui/App.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"App"},"ignored":false,"code":"exports.__esModule = true;\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _meteor = require('meteor/meteor');\n\nvar _reactMeteorData = require('meteor/react-meteor-data');\n\nvar _msgs = require('../api/msgs.js');\n\nvar _users = require('../api/users.js');\n\nvar _MsgBox = require('./MsgBox.jsx');\n\nvar _MsgBox2 = _interopRequireDefault(_MsgBox);\n\nvar _AccountsUIWrapper = require('./AccountsUIWrapper.jsx');\n\nvar _AccountsUIWrapper2 = _interopRequireDefault(_AccountsUIWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar App = function (_Component) {\n  (0, _inherits3['default'])(App, _Component);\n\n  function App(props) {\n    (0, _classCallCheck3['default'])(this, App);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, _Component.call(this, props));\n\n    _this.state = {};\n    return _this;\n  }\n\n  App.prototype.concatMsgs = function () {\n    function concatMsgs(msgs) {\n      var _this2 = this;\n\n      var fList = [];\n      var result = [];\n      msgs.forEach(function (msg) {\n        var fId = msg.send_id == _this2.props.currentUser._id ? msg.recevier_id : msg.send_id;\n        if (fList.indexOf(fId) < 0) {\n          fList.push(fId);\n          result.push(msg);\n        }\n      });\n      return result;\n    }\n\n    return concatMsgs;\n  }();\n\n  App.prototype.render = function () {\n    function render() {\n      return _react2['default'].createElement(\n        'div',\n        { className: 'container' },\n        _react2['default'].createElement(_AccountsUIWrapper2['default'], null),\n        _react2['default'].createElement(_MsgBox2['default'], { msgs: this.concatMsgs(this.props.msgs) })\n      );\n    }\n\n    return render;\n  }();\n\n  return App;\n}(_react.Component);\n\nApp.propTypes = {\n  msgs: _react.PropTypes.array.isRequired,\n  currentUser: _react.PropTypes.object\n};\n\nexports['default'] = (0, _reactMeteorData.createContainer)(function () {\n  _meteor.Meteor.subscribe('msgs');\n  _meteor.Meteor.subscribe('users');\n  return {\n    msgs: _msgs.Msgs.find({}).fetch(),\n    currentUser: _meteor.Meteor.user()\n  };\n}, App);","ast":null,"map":{"version":3,"sources":["/imports/ui/App.jsx"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;;;IACM;;;AACJ,WADI,GACJ,CAAY,KAAZ,EAAmB;2CADf,KACe;;kEACjB,sBAAM,KAAN,GADiB;;AAEjB,UAAK,KAAL,GAAa,EAAb,CAFiB;;GAAnB;;AADI,gBAQJ;wBAAY,MAAM;;;AAChB,UAAI,QAAQ,EAAR,CADY;AAEhB,UAAI,SAAS,EAAT,CAFY;AAGhB,WAAK,OAAL,CAAa,UAAC,GAAD,EAAS;AACpB,YAAI,MAAM,IAAI,OAAJ,IAAe,OAAK,KAAL,CAAW,WAAX,CAAuB,GAAvB,GAA6B,IAAI,WAAJ,GAAkB,IAAI,OAAJ,CADpD;AAEpB,YAAG,MAAM,OAAN,CAAc,GAAd,IAAqB,CAArB,EAAuB;AACxB,gBAAM,IAAN,CAAW,GAAX,EADwB;AAExB,iBAAO,IAAP,CAAY,GAAZ,EAFwB;SAA1B;OAFW,CAAb,CAHgB;AAUhB,aAAO,MAAP,CAVgB;;;;;;AARd,gBAqBJ;sBAAS;AACP,aACE;;UAAK,WAAU,WAAV,EAAL;QACE,sEADF;QAEE,wDAAQ,MAAO,KAAK,UAAL,CAAgB,KAAK,KAAL,CAAW,IAAX,CAAvB,EAAR,CAFF;OADF,CADO;;;;;;SArBL;;;AAgCN,IAAI,SAAJ,GAAgB;AACd,QAAM,iBAAU,KAAV,CAAgB,UAAhB;AACN,eAAa,iBAAU,MAAV;CAFf;;qBAKe,sCAAgB,YAAM;AACnC,iBAAO,SAAP,CAAiB,MAAjB,EADmC;AAEnC,iBAAO,SAAP,CAAiB,OAAjB,EAFmC;AAGnC,SAAO;AACL,UAAM,WAAK,IAAL,CAAU,EAAV,EAAc,KAAd,EAAN;AACA,iBAAa,eAAO,IAAP,EAAb;GAFF,CAHmC;CAAN,EAO5B,GAPY","file":"/imports/ui/App.jsx.map","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport ReactDOM from 'react-dom'\nimport { Meteor } from 'meteor/meteor'\nimport { createContainer } from 'meteor/react-meteor-data'\nimport { Msgs } from '../api/msgs.js'\nimport { Users } from '../api/users.js'\nimport MsgBox from './MsgBox.jsx'\nimport AccountsUIWrapper from './AccountsUIWrapper.jsx'\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      \n    }\n  }\n\n  concatMsgs (msgs) {\n    let fList = []\n    let result = []\n    msgs.forEach((msg) => {\n      let fId = msg.send_id == this.props.currentUser._id ? msg.recevier_id : msg.send_id\n      if(fList.indexOf(fId) < 0){\n        fList.push(fId)\n        result.push(msg)\n      }\n    })\n    return result\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <AccountsUIWrapper />\n        <MsgBox msgs={ this.concatMsgs(this.props.msgs) }/>\n      </div>\n\n    );\n  }\n}\n \nApp.propTypes = {\n  msgs: PropTypes.array.isRequired,\n  currentUser: PropTypes.object,\n};\n \nexport default createContainer(() => {\n  Meteor.subscribe('msgs');\n  Meteor.subscribe('users');\n  return {\n    msgs: Msgs.find({}).fetch(),\n    currentUser: Meteor.user(),\n  };\n}, App);"]},"hash":"f237967370e7a576998fb4f0469c1ffc073efa71"}
